<html lang="fr">

<style>
    body {
        background: linear-gradient(95deg, #00db7f 0%, #1DB954 40%, #03903e 100%);
        margin: 0;
        padding: 0;
        font-family: Verdana, sans-serif, Helvetica, Arial;
    }

    #btns {
        text-align: center;
        display: block;
        margin: 1%;
    }

    #sondage {
        background-color: #696969;
        border: none;
        color: #FFFFFF;
        cursor: pointer;
        font-size: 17px;
        font-weight: 700;
        font-family: Verdana, sans-serif, Helvetica, Arial;
        line-height: 41px;
        padding: 15px 40px;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        white-space: nowrap;
    }

    #sondage:hover {
        background-color: #03903e;
        transition: ease-in-out 0.5s;
    }

    #refresh {
        background-color: #696969;
        border: none;
        color: #FFFFFF;
        cursor: pointer;
        font-size: 17px;
        font-weight: 700;
        font-family: Verdana, sans-serif, Helvetica, Arial;
        line-height: 41px;
        padding: 15px 40px;
        text-align: center;
        text-decoration: none;
        text-transform: uppercase;
        white-space: nowrap;
    }

    #refresh:hover {
        background-color: #EE4B2B;
        transition: ease-in-out 0.5s;
    }

    table {
        margin: 0 auto;
        text-align: left;
        color: white;
        cursor: default;
        border-spacing: 0;
        border-collapse: collapse;
        width: 80%;
        font-family: Verdana, sans-serif, Helvetica, Arial;
    }

    th,
    td {
        padding: 8px;
        text-align: center;
        vertical-align: middle;
        font-family: Verdana, sans-serif, Helvetica, Arial;
    }

    h1 {
        padding: 8px;
        text-align: center;
        vertical-align: middle;
        font-family: Verdana, sans-serif, Helvetica, Arial;
        font-size: 30px;
        font-weight: 600;
        text-transform: uppercase;
        -webkit-text-stroke-width: 2px;
        -webkit-text-stroke-color: black;
        color: white;
    }

    th {
        background-color: #ffffff44;
    }

    tr:nth-child(even) {
        background-color: #ffffff24;
    }

    tr:nth-child(odd) {
        background-color: #ffffff11;
    }

    td:hover {
        background-color: #ffffff44;
    }
</style>
<div id="btns" style="text-align: center;">
    <a id="sondage" href="/poll">Sondage du jour</a>
    <a id="refresh" href='/refreshTrackList'>Refresh</a>
</div>
<table>
    <thead>
    <tr>
        <th>Titre</th>
        <th>Auteur</th>
        <th>Ajoutée par</th>
        <th>Ecouter</th>
    </tr>
    </thead>
    <tbody id="trackListBody">
    </tbody>
</table>
<!-- Ajout du script pour la requête AJAX -->
<script>
    // Fonction pour effectuer la requête AJAX
    document.addEventListener("DOMContentLoaded", function() {
        fetch('/getTrackList')
            .then(response => response.json())
            .then(data => {
                const tbody = document.getElementById('trackListBody');
                data.forEach(record => {
                    const row = document.createElement('tr');

                    const titleCell = document.createElement('td');
                    titleCell.textContent = record.name;
                    row.appendChild(titleCell);

                    const authorCell = document.createElement('td');
                    authorCell.textContent = record.artist;
                    row.appendChild(authorCell);

                    const addedByCell = document.createElement('td');
                    addedByCell.textContent = record.adder;
                    row.appendChild(addedByCell);

                    const listenCell = document.createElement('td');
                    const listenLink = document.createElement('a');
                    listenLink.href = record.url;
                    listenLink.textContent = "Ecouter ▶️";
                    listenLink.classList.add("url");
                    listenLink.target = "_blank";
                    listenCell.appendChild(listenLink);
                    row.appendChild(listenCell);

                    tbody.appendChild(row);
                });
            })
            .catch(error => {
                console.error('Error fetching track list:', error);
            });
    });
</script>

</html>